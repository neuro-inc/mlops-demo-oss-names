{
  "pipeline": {
    "name": "train"
  },
  "description": "A pipeline that runs training.",
  "input": {
    "pfs": {
      "repo": "preprocess",
      "glob": "/"
    }
  },
  "transform": {
    "image": "ghcr.io/neuro-inc/neuro-flow:21.11.2",
    "cmd": [
      "/bin/bash"
    ],
    "stdin": [
      "cd /tmp",
      "mkdir -p .neuro",
      "echo ${LIVE_B64} | base64 -d > .neuro/live.yaml",
      "echo ${PROJECT_B64} | base64 -d > .neuro/project.yaml",
      "neuro-flow kill train",
      "neuro-flow --show-traceback run train --param mlflow_uri ${MLFLOW_URI} --param pachy_uri ${PACHY_URI}"
    ],
    "env": {
      "NEURO_PASSED_CONFIG": "${NEURO_CONFIG}",
      "LIVE_B64": "##LIVE_B64_VAL##",
      "PROJECT_B64": "##PROJECT_B64##"
    }
  }
}